name: Pull upstream changes

on:
  schedule:
    - cron: '0 0 * * MON-FRI'
  workflow_dispatch:

jobs:
  pull-upstream:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
      with:
        ref: main
    - run: git pull --ff-only https://github.com/QunaSys/quri-parts.git
    - run: git push
    - run: git fetch origin internal-main
    - run: git switch internal-main
    - run: git merge main
    - run: git push origin internal-main
